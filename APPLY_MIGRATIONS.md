# Применение миграций для исправления каталога

## Проблема
При нажатии на "Кафе и Рестораны" на главной странице возникает ошибка, потому что:
1. Категория 'cafes' не существует в базе данных
2. Нет данных кафе и ресторанов

## Решение
Созданы миграции для автоматического создания категорий и данных.

## Как применить

### 1. Применить миграции
```bash
cd /home/mohirbek/Projects/Samarqand-city-mall
python manage.py migrate
```

### 2. Проверить результат
После применения миграций:
- Категория "Кафе и Рестораны" (slug: cafes) будет создана
- 8 кафе и ресторанов будут добавлены в эту категорию
- Все остальные категории тоже будут созданы

### 3. Проверить работу
1. Запустить сервер: `python manage.py runserver`
2. Открыть главную страницу: `http://127.0.0.1:8000/`
3. Нажать на "Кафе и Рестораны"
4. Должна открыться страница `/catalog/cafes/` со списком кафе

## Созданные кафе и рестораны

После применения миграции в категории "Кафе и Рестораны" будут:

1. **Starbucks** (1 этаж) - кофейня
2. **KFC** (3 этаж) - ресторан быстрого питания
3. **Pizza Mia** (3 этаж) - пиццерия
4. **Sushi Bar** (3 этаж) - суши-бар
5. **Coffee House** (2 этаж) - кофейня
6. **Burger King** (3 этаж) - ресторан быстрого питания
7. **Subway** (2 этаж) - сэндвичи
8. **McDonald's** (3 этаж) - ресторан быстрого питания

## Созданные категории

Все необходимые категории будут созданы:
- **Магазины** (slug: shops)
- **Кафе и Рестораны** (slug: cafes)
- **Развлечения** (slug: entertainment)
- **Услуги** (slug: services)

## Проверка через админку

После применения миграций можно проверить данные через админку:
1. Зайти в админку: `http://127.0.0.1:8000/admin/`
2. Проверить раздел "Категории"
3. Проверить раздел "Арендаторы"

## Если миграции не работают

Альтернативный способ - создать данные через Django shell:

```python
from core.models import Category, Tenant
from django.utils.text import slugify

# Создать категорию
category, created = Category.objects.get_or_create(
    slug='cafes',
    defaults={'name': 'Кафе и Рестораны'}
)

# Создать несколько кафе
cafes_data = [
    {'name': 'Starbucks', 'floor': '1 этаж', 'description': 'Кофейня'},
    {'name': 'KFC', 'floor': '3 этаж', 'description': 'Ресторан быстрого питания'},
    {'name': 'Pizza Mia', 'floor': '3 этаж', 'description': 'Пиццерия'},
]

for cafe_data in cafes_data:
    Tenant.objects.get_or_create(
        name=cafe_data['name'],
        category=category,
        defaults={
            'slug': slugify(cafe_data['name']),
            'floor': cafe_data['floor'],
            'description': cafe_data['description'],
        }
    )
```

## Результат
После применения исправлений:
- ✅ Нажатие на "Кафе и Рестораны" работает корректно
- ✅ Открывается страница `/catalog/cafes/` с списком кафе
- ✅ Все ссылки на категории работают
- ✅ Нет ошибок NoReverseMatch
